function capIt(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}app.controller("map",["$scope","group","map","memory","$location",function(e,o,n,t,r){e.name=t.name,e.link=location.href,e.results=[],t.groups||(t.groups={}),t.groups[o.id()]?e.isCreator=t.groups[o.id()].creator:e.isCreator=!1,e.showingSharing=!1,e.showingSettings=!1,e.expand=function(e){document.querySelector("#"+e).classList.toggle("expand")},e.toggleIgnore=function(e){o.members[t.name].creator&&e?o.toggleIgnore(e):o.toggleIgnore(t.name)},e.search=function(){n.search(function(o){e.results=o})};var s=function(){t.name&&t.name in o.members||(t.name=prompt("name",""),e.name=t.name);var s=o.joinGroup({name:t.name,lat:n.location.lat,lng:n.location.lng},function(){o.online(t.name),t.groups||(t.groups={}),t.groups[o.id()]={name:o.name,creator:o.members[t.name].creator,votes:t.groups[o.id()]?t.groups[o.id()].votes:{}};for(var n in o.options.types)n in t.groups[o.id()].votes||(o.options.types[n]++,t.groups[o.id()].votes[n]=!0);e.updateList(),e.isCreator=o.members[t.name].creator});s||r.path("/"),n.listen()};n.requestLocation(function(){n.createMap(),o.ready(s)&&s()}),e.showGroup=!1,e.members=[],e.members.push({name:"JS Broke Somewhere"}),e.updateList=function(){console.log("Firebase gave me some new info"),e.meetingName=o.name,e.members=[];for(var n in o.members)e.members.push({name:n,online:o.members[n].online});e.radius=o.options.radius,e.types=[];for(var r in o.options.types)e.types.push({name:capIt(r.replace(/_/g," ")),type:r,value:t.groups[o.id()].votes[r]})},e.toggleVote=function(n,r){e.types[n].value=!e.types[n].value,o.updateVotes(r,e.types[n].value),t.groups[o.id()].votes[r]=e.types[n].value},e.showResult=function(o){e.mode="map",n.setLocation(o)},o.onUpdate(e.updateList)}]);